<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
  <title>ç”Ÿæ—¥å¿«ä¹ Â· ç“œç“œ</title>
  <style>
    html,body{
      margin:0;
      padding:0;
      overflow:hidden;
      width:100%;
      height:100%;
      background: radial-gradient(circle at 50% 20%, #4b3c7d 0%, #1b1538 70%);
      font-family:"PingFang SC","Helvetica Neue",sans-serif;
      color:white;
    }

    /* å±…ä¸­æ–‡æœ¬å®¹å™¨ */
    #titleBox{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%);
      text-align:center;
      z-index:5;
      width:100%;
      pointer-events:none;
    }

    /* ä¸»æ ‡é¢˜ */
    #mainTitle{
      font-size:2.8rem;
      font-weight:700;
      letter-spacing:4px;
      background:linear-gradient(45deg,#ffb7e3,#ffd161,#ff8ac9,#ffe6a7);
      -webkit-background-clip:text;
      color:transparent;
      text-shadow:0 0 18px rgba(255,120,200,0.9);
      animation:heartbeat 2s infinite ease-in-out;
      margin:0 0 22px 0;
    }

    @keyframes heartbeat {
      0%   { transform:scale(1); }
      20%  { transform:scale(1.1); }
      40%  { transform:scale(1); }
      60%  { transform:scale(1.08); }
      80%  { transform:scale(1); }
    }

    /* å‰¯æ ‡é¢˜ */
    #subTitle{
      font-size:1.3rem;
      opacity:0.9;
      letter-spacing:2px;
      text-shadow:0 0 12px rgba(255,255,255,0.6);
    }

    /* æ‰“å¼€ä¿¡ä»¶æŒ‰é’® */
    #openLetterBtn{
      position:absolute;
      right:12px;
      bottom:12px;
      padding:10px 16px;
      border-radius:10px;
      background:rgba(255,180,220,0.2);
      border:1px solid rgba(255,160,220,0.4);
      backdrop-filter:blur(6px);
      text-shadow:0 0 8px rgba(255,200,255,0.8);
      font-size:0.9rem;
      z-index:10;
    }

    /* ä¿¡ä»¶é®ç½© */
    #letterPage{
      display:none;
      position:absolute;
      top:0;left:0;
      width:90%;height:100%;
      background:rgba(0,0,0,0.85);
      backdrop-filter:blur(4px);
      padding:20px;
      z-index:20;
    }

    /* ä¿¡ä»¶å®¹å™¨ */
    #letterBook{
      width:90%;
      max-width:500px;
      height:70%;
      margin:50px auto 0 auto;
      background:white;
      color:#333;
      padding:20px;
      border-radius:12px;
      box-shadow:0 0 25px rgba(255,120,200,0.4);
      position:relative;
      overflow:hidden;
    }

    .page{
      width:100%;
      height:100%;
      position:absolute;
      top:0;left:0;
      padding:20px;
      background:white;
      transform-origin:left;
      transition:transform 0.8s ease;
      backface-visibility:hidden;
      border-radius:10px;
      box-sizing:border-box;
    }

    #closeLetter{
      position:absolute;
      top:10px;
      left:10px;
      background:#ff8ac9;
      color:white;
      padding:8px 14px;
      border-radius:8px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<!-- å±…ä¸­æ ‡é¢˜ -->
<div id="titleBox">
  <h1 id="mainTitle">ç”Ÿæ—¥å¿«ä¹ ç“œç“œ</h1>
  <div id="subTitle">æ„¿ä½ æ‰€æƒ³æ‰€æ„¿ çš†å¯å®ç° âœ¨</div>
</div>

<!-- æ‰“å¼€ä¿¡ä»¶æŒ‰é’® -->
<div id="openLetterBtn">å†™ç»™ç“œç“œçš„ä¸€å°ä¿¡ ğŸ’Œ</div>

<!-- ä¿¡ä»¶é¡µé¢ -->
<div id="letterPage">
  <div id="letterBook">
    <div class="page" id="letter1">
      <h2>äº²çˆ±çš„ç“œç“œï¼š</h2>
      <p>
        ç”Ÿæ—¥å¿«ä¹ï¼åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œé€ä¸Šæœ€çœŸè¯šçš„ç¥ç¦ã€‚
        æ„¿ä½ æ¯å¤©éƒ½èƒ½æ„Ÿå—åˆ°æ¸©æš–ï¼Œç”Ÿæ´»ä¸­æœ‰å¹³é™ä¸å–œæ‚¦ç›¸ä¼´ã€‚
      </p>
      <p>
        æ„¿æ¯ä¸€ä¸ªå¹³å‡¡çš„æ—¶åˆ»éƒ½é—ªçƒç€ç»†å¾®çš„ç¾å¥½ï¼Œæ¯ä¸€æ¬¡å¾®ç¬‘éƒ½è½»è½»è§¦åŠ¨å¿ƒåº•çš„å®‰å®ã€‚
        å¸Œæœ›ä½ åº¦è¿‡çš„æ¯ä¸€å¤©éƒ½åƒé˜³å…‰ä¸€æ ·æŸ”å’Œï¼Œè®©äººæ„Ÿåˆ°èˆ’å¿ƒã€‚
      </p>
      <p>ç‚¹å‡»å³è¾¹ç¿»é¡µ â†’</p>
    </div>

    <!-- ç¬¬äºŒé¡µ -->
    <div class="page" id="letter2">
      <h2>æƒ³å¯¹ä½ è¯´ï¼š</h2>
      <p>
        åœ¨è¿™ä¸€å¤©ï¼Œæ„¿ä½ è¢«æ¸©æš–ç¯ç»•ï¼Œè¢«å®é™é™ªä¼´ã€‚
        æ„¿ä½ çš„æ—¥å­é‡Œå……æ»¡ç»†å°è€ŒçœŸå®çš„ç¾å¥½ç¬é—´ï¼ŒåƒæŸ”å’Œçš„é£ã€æ¸…æ™¨çš„å…‰ã€å¹³é™çš„æ¹–æ°´ã€‚
      </p>
      <p>
        ç¥ç¦ä½ åœ¨æ–°çš„ä¸€å²é‡Œï¼Œæ¯ä¸€åˆ»éƒ½å®‰ç„¶ï¼Œæ¯ä¸€ä¸ªè½¬è§’éƒ½å¹³å’Œã€‚
        æ„¿å¹³å‡¡çš„æ—¥å­é‡Œï¼Œä¾ç„¶èƒ½æ„Ÿå—åˆ°ç”Ÿæ´»çš„é™ç¾å’Œå…‰äº®ã€‚
      </p>
      <p>ç‚¹å‡»å³è¾¹ç¿»é¡µ â†’</p>
    </div>

    <!-- ç¬¬ä¸‰é¡µ -->
    <div class="page" id="letter3">
      <h2>æœ€åï¼š</h2>
      <p>
        ç”Ÿæ—¥å¿«ä¹ï¼Œç“œç“œ ğŸ‚
        æ„¿æœªæ¥çš„æ—¥å­é‡Œï¼Œæ‰€æœ‰ç®€å•è€Œæ¸©æš–çš„æ—¶å…‰éƒ½å±äºä½ ã€‚
        æ„¿å²æœˆæ¸©æŸ”ä»¥å¾…ï¼Œä½ çš„æ¯ä¸€æ—¥éƒ½é™å¥½è€Œèˆ’å¿ƒã€‚
      </p>
      <p>
        ç¥ä½ å¹³å®‰ã€å–œä¹ã€å®‰å®ï¼Œä¹Ÿæ„¿ä½ çš„æ¯ä¸€ä¸ªç¬‘å®¹éƒ½è‡ªç„¶æµéœ²ï¼Œæ¯ä¸€æ¬¡å‘¼å¸éƒ½è½»æ¾è‡ªåœ¨ã€‚
      </p>
      <p>å·¦ä¸Šè¿”å›</p>
    </div>
  </div>
  <div id="closeLetter">è¿”å›</div>
</div>

<!-- éŸ³ä¹ -->
<audio id="bgMusic" loop src="https://cdn.jsdelivr.net/gh/yourcdn/softmusic.mp3"></audio>

<!-- Three.js  -->
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>

<script>
  /* ===== æ‰“å¼€ä¿¡ä»¶ ===== */
  let currentPage=0;
  const pages=document.querySelectorAll('.page');
  pages.forEach((p,i)=>{ if(i!==0) p.style.transform="rotateY(180deg)"; });

  document.getElementById('openLetterBtn').onclick=()=>document.getElementById('letterPage').style.display='block';
  document.getElementById('closeLetter').onclick=()=>document.getElementById('letterPage').style.display='none';

  pages.forEach((p,i)=>{
    p.onclick=()=>{
      if(i<pages.length-1){
        p.style.transform="rotateY(-180deg)";
        pages[i+1].style.transform="rotateY(0deg)";
      }
    }
  });

  /* ===== èƒŒæ™¯éŸ³ä¹ ===== */
  const bgMusic=document.getElementById('bgMusic');
  document.body.addEventListener('click',()=>{ bgMusic.play().catch(()=>{}); });

  /* ===== Three.js åœºæ™¯ ===== */
  const scene=new THREE.Scene();
  const camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,2000);
  camera.position.set(0,18,40);

  const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
  renderer.setSize(window.innerWidth,window.innerHeight);
  document.body.appendChild(renderer.domElement);

  /* æ˜Ÿç©º */
  let stars=new THREE.Group();
  scene.add(stars);
  const starGeo=new THREE.SphereGeometry(0.1,6,6);
  for(let i=0;i<900;i++){
    let s=new THREE.Mesh(starGeo,new THREE.MeshBasicMaterial({color:0xffffff}));
    s.position.set((Math.random()-0.5)*120,(Math.random()-0.5)*60,(Math.random()-0.5)*80);
    stars.add(s);
  }

  /* å°çˆ±å¿ƒ */
  function createHeart(x,y,z){
    const shape=new THREE.Shape();
    shape.moveTo(0,0);
    shape.bezierCurveTo(0,3,-3,3,-3,0);
    shape.bezierCurveTo(-3,-3,3,-3,3,0);
    shape.bezierCurveTo(3,3,0,3,0,0);
    const geo=new THREE.ExtrudeGeometry(shape,{depth:1,bevelEnabled:false});
    const mat=new THREE.MeshPhongMaterial({color:0xff77aa,emissive:0xff4488,shininess:150});
    const mesh=new THREE.Mesh(geo,mat);
    mesh.position.set(x,y,z);
    mesh.scale.set(0.3,0.3,0.3);
    scene.add(mesh);
    return mesh;
  }
  let hearts=[];
  for(let i=0;i<10;i++){
    hearts.push(createHeart((Math.random()-0.5)*25,Math.random()*14-4,(Math.random()-0.5)*20));
  }

  /* çƒŸèŠ± */
  function createFirework(){
    const group=new THREE.Group();
    const geo=new THREE.SphereGeometry(0.12,8,8);
    let color=new THREE.Color(Math.random(),Math.random(),Math.random());
    let mat=new THREE.MeshBasicMaterial({color});
    for(let i=0;i<80;i++){
      const p=new THREE.Mesh(geo,mat);
      const angle=Math.random()*Math.PI*2;
      const speed=Math.random()*0.5+0.3;
      p.userData={vx:Math.cos(angle)*speed,vy:Math.random()*0.5+0.5,vz:Math.sin(angle)*speed};
      group.add(p);
    }
    group.position.set((Math.random()-0.5)*20,4+Math.random()*12,(Math.random()-0.5)*15);
    scene.add(group);

    function explode(){
      group.children.forEach(p=>{
        p.position.x+=p.userData.vx;
        p.position.y+=p.userData.vy;
        p.position.z+=p.userData.vz;
      });
      requestAnimationFrame(explode);
    }
    explode();

    setTimeout(()=>scene.remove(group),2000);
  }
  document.body.addEventListener('click',createFirework);

  /* åŠ¨ç”» */
  function animate(){
    requestAnimationFrame(animate);
    stars.rotation.y+=0.0008;
    hearts.forEach((h,i)=>{h.rotation.y+=0.01; h.position.y+=Math.sin(Date.now()*0.001+i)*0.01;});
    renderer.render(scene,camera);
  }
  animate();

  /* è‡ªé€‚åº” */
  window.addEventListener('resize',()=>{
    renderer.setSize(window.innerWidth,window.innerHeight);
    camera.aspect=window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
  });
</script>

</body>
</html>
